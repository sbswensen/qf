{{define "title"}} Update {{.DocName}} Document {{end}}


{{define "styles"}}
  <style>
  label {
    display: block;
  }
  form div {
    margin-bottom: 10px;
  }
  input, select, textarea {
    width: 300px;
  }
  input[type=submit], input[type=checkbox] {
    width:auto;
  }
  .button-look {
    text-decoration: none;
    background-color: gray;
    color: white;
    border: 1px solid #999;
    border-radius: 3px;
    padding: 3px;
  }
  .button-look:hover {
    background-color: #ccc;
  }
  </style>
{{end}}


{{define "main"}}
  <h3>Edit {{.DocName}} Document</h3>

  <span> Creation Date : <b>{{.Created}}</b></span><br>
  <span> Last Modification Date : <b>{{.Modified}}</b></span><br>
  <span> Created By : <b>{{.FirstName}} {{.Surname}} with User id {{.CreatedBy}} <b><br><br>
  {{ if $.DeletePerm }}
    <a class='button-look' href='/doc/{{.DocName}}/delete/{{.Id}}/'>Delete</a><br><br>
  {{end}}

  <form method="post" action="">
    {{range .DocAndStructures}}
      <div>
        {{ if eq .Type "Section Break"}}
          <h4>{{.Label}}</h4>
        {{ else }}
          <label>{{.Label}}</label>
        {{ end }}

        {{ if eq .Type "Check"}}
          {{ if eq .Data "t"}}
            <input type="checkbox" name="{{.Name}}" checked>
          {{else}}
            <input type="checkbox" name="{{.Name}}">
          {{end}}

        {{else if eq .Type "Data"}}
          {{ if .Required}}
            <input type="text" name="{{.Name}}" value="{{.Data}}" required>
          {{ else }}
            <input type="text" name="{{.Name}}" value="{{.Data}}">
          {{ end }}

        {{else if eq .Type "Date"}}
          {{ if .Required }}
            <input type="date" name="{{.Name}}" value="{{.Data}}" required>
          {{ else }}
            <input type="date" name="{{.Name}}" value="{{.Data}}">
          {{end}}

        {{ else if eq .Type "Datetime"}}
          {{ if .Required }}
            <input type="datetime-local" name={{.Name}} value="{{.Data}}" required>
          {{else}}
            <input type="datetime-local" name="{{.Name}}" value="{{.Data}}">
          {{end}}

        {{else if eq .Type "Email"}}
          {{if .Required}}
            <input type="email" name="{{.Name}}" value="{{.Data}}" required>
          {{else}}
            <input type="email" name="{{.Name}}" value="{{.Data}}">
          {{end}}

        {{else if eq .Type "Float"}}
          {{if .Required}}
            <input type="number" step="0.0000001" name="{{.Name}}" value="{{.Data}}" required>
          {{else}}
            <input type="number" step="0.0000001" name="{{.Name}}" value="{{.Data}}">
          {{end}}

        {{else if or (eq .Type "Int") (eq .Type "Link")}}
          {{if .Required}}
            <input type="number" name="{{.Name}}" value="{{.Data}}" required>
          {{else}}
            <input type="number" name="{{.Name}}" value="{{.Data}}">
          {{end}}

        {{else if eq .Type "Read Only" }}
          <input type="text" name="{{.Name}}" value="{{.Data}}" disabled/>

        {{ else if eq .Type "Select"}}
          <select name="{{.Name}}">
            <option selected>{{.Data}}</option>
            {{range .OtherOptions}}
              <option>{{.}}</option>
            {{end}}
          </select>

        {{else if eq .Type "Text"}}
          {{if .Required}}
            <textarea name="{{.Name}}" required>{{.Data}}</textarea>
          {{else}}
            <textarea name="{{.Name}}">{{.Data}}</textarea>
          {{end}}

        {{else if eq .Type "URL"}}
          {{if .Required}}
            <input type="url" name="{{.Name}}" value="{{.Data}}" required>
          {{else}}
            <input type="url" name="{{.Name}}" value="{{.Data}}">
          {{end}}

        {{end}}
      </div>
    {{end}}

    <div>
      {{ if $.UpdatePerm }}
        <input type="submit" value="Save" >
      {{ end}}
    </div>
  </form>

{{end}}


{{define "scripts"}}
  {{ if eq $.UpdatePerm false}}
    <script>
    $(document).ready(function() {
      $('input, textarea, select').attr('disabled', 'disabled');
    })
    </script>
  {{end}}
{{end}}
